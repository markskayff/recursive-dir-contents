<?php

function getDirContents($dir_path){
	// ----------------------------------------------------------------------------------------
	// All files here
	// ----------------------------------------------------------------------------------------
	$all_files = [];
	// ----------------------------------------------------------------------------------------
	// Open dir
	// ----------------------------------------------------------------------------------------
	$dh = opendir($dir_path);
	// ----------------------------------------------------------------------------------------
	// If no dir, do something like return false or throw an Exception
	// ----------------------------------------------------------------------------------------
	if(!$dh){
		return false;
	}

	while (($file = readdir($dh)) !== FALSE){
		// ----------------------------------------------------------------------------------------
		// Skip the current and parent dir entries
		// ----------------------------------------------------------------------------------------
		if(in_array($file, [".", ".."]))
			continue;

		if(is_dir($dir_path . DIRECTORY_SEPARATOR . $file)){
			// ----------------------------------------------------------------------------------------
			// Recursive function call
			// ----------------------------------------------------------------------------------------
			$all_files_here = getDirContents($dir_path . DIRECTORY_SEPARATOR . $file);
			// ----------------------------------------------------------------------------------------
			// Merge all files collected from this directory with the all files array
			// to be returned 
			// ----------------------------------------------------------------------------------------
			$all_files = array_merge($all_files, $all_files_here);				
			continue;
		}
		// ----------------------------------------------------------------------------------------
		// It's a file
		// Simply push it to the all files collection
		// ----------------------------------------------------------------------------------------
		array_push($all_files, $dir_path . DIRECTORY_SEPARATOR . $file);
	}

	closedir($dh);

	// ----------------------------------------------------------------------------------------
	// Return an array with all file names here
	// ----------------------------------------------------------------------------------------
	return $all_files;
}